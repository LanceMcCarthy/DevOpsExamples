// This class is autogenerated. Do not modify.

using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Threading.Tasks;
using Microsoft.Maui.Controls;

namespace MauiDemo;

public partial class TelerikTheming : ResourceDictionary
{
    public static readonly ReadOnlyCollection<ThemeKey> Themes =
        new ReadOnlyCollection<ThemeKey>(new List<ThemeKey>() {
            new ThemeKey("Platform", "Main"),
            new ThemeKey("Telerik", "Main"),
            new ThemeKey("Telerik", "Main Dark"),
            new ThemeKey("Telerik", "Ocean Blue"),
            new ThemeKey("Telerik", "Ocean Blue Dark"),
            new ThemeKey("Telerik", "Purple"),
            new ThemeKey("Telerik", "Purple Dark"),
            new ThemeKey("Telerik", "Turquoise"),
            new ThemeKey("Telerik", "Turquoise Dark"),
        });

    private ThemeKey theme = TelerikTheming.Themes[0];

    public TelerikTheming()
    {
        InitializeComponent();
        MergeThemeResources();
    }

    public ThemeKey Theme
    {
        get
        {
            return this.theme;
        }

        set
        {
            if (this.theme == value)
            {
                return;
            }

            this.theme = value;

            // Clear the last theme.
            this.MergedDictionaries.Clear();
            this.MergeThemeResources();
        }
    }

    private static async Task PrefetchResourceDictionaryAsync(Lazy<ResourceDictionary> lazyResoruceDictionary)
    {
        TaskCompletionSource tcs = new TaskCompletionSource();
        Application.Current.Dispatcher.DispatchDelayed(TimeSpan.FromMilliseconds(0), () => {
            Application.Current.Resources.MergedDictionaries.Add(lazyResoruceDictionary.Value);
            Application.Current.Resources.MergedDictionaries.Remove(lazyResoruceDictionary.Value);
            tcs.SetResult();
        });
        await tcs.Task;
    }

    /// <summary>
    /// Synchronously load and parse all XAML files related to theming.
    /// This may take a few seconds, but after it, runtime theme switch will be fast.
    /// </summary>
    public static async Task PrefetchAsync(Action<int, int> progress)
    {
        var tasks = new List<Lazy<ResourceDictionary>>()
        {
            Platform_Swatch_Main,
            Telerik_Swatch_Main,
            Telerik_Swatch_MainDark,
            Telerik_Swatch_OceanBlue,
            Telerik_Swatch_OceanBlueDark,
            Telerik_Swatch_Purple,
            Telerik_Swatch_PurpleDark,
            Telerik_Swatch_Turquoise,
            Telerik_Swatch_TurquoiseDark,
            Platform_Variables,
            Telerik_Variables,
            Core_Styles,
            Calendar_Styles,
            Chart_Styles,
            CollectionView_Styles,
            DataForm_Styles,
            DataPager_Styles,
            NavigationView_Styles,
            TabView_Styles,
            Toolbar_Styles,
            DataGrid_Styles,
            Scheduler_Styles,
            TreeView_Styles,
            AIPrompt_Styles,
            Entry_Styles,
            ComboBox_Styles,
            ImageEditor_Styles,
            RichTextEditor_Styles,
            Chat_Styles,
            PDFViewer_Styles,
        };

        if (tasks.Count == 0)
        {
            progress?.Invoke(1, 1);    
        }
        else
        {
            progress?.Invoke(0, tasks.Count);
            for(var i = 0; i < tasks.Count; i++)
            {
                await PrefetchResourceDictionaryAsync(tasks[i]);
                progress?.Invoke(i + 1, tasks.Count);
            }
        }
    }
    private static readonly Lazy<ResourceDictionary> Platform_Swatch_Main = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Platform.Swatches.Main());
    private static readonly Lazy<ResourceDictionary> Telerik_Swatch_Main = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Telerik.Swatches.Main());
    private static readonly Lazy<ResourceDictionary> Telerik_Swatch_MainDark = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Telerik.Swatches.MainDark());
    private static readonly Lazy<ResourceDictionary> Telerik_Swatch_OceanBlue = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Telerik.Swatches.OceanBlue());
    private static readonly Lazy<ResourceDictionary> Telerik_Swatch_OceanBlueDark = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Telerik.Swatches.OceanBlueDark());
    private static readonly Lazy<ResourceDictionary> Telerik_Swatch_Purple = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Telerik.Swatches.Purple());
    private static readonly Lazy<ResourceDictionary> Telerik_Swatch_PurpleDark = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Telerik.Swatches.PurpleDark());
    private static readonly Lazy<ResourceDictionary> Telerik_Swatch_Turquoise = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Telerik.Swatches.Turquoise());
    private static readonly Lazy<ResourceDictionary> Telerik_Swatch_TurquoiseDark = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Telerik.Swatches.TurquoiseDark());
    private static readonly Lazy<ResourceDictionary> Platform_Variables = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Platform.Variables());
    private static readonly Lazy<ResourceDictionary> Telerik_Variables = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Telerik.Variables());
    private static readonly Lazy<ResourceDictionary> Core_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.Core());
    private static readonly Lazy<ResourceDictionary> Calendar_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.Calendar());
    private static readonly Lazy<ResourceDictionary> Chart_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.Chart());
    private static readonly Lazy<ResourceDictionary> CollectionView_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.CollectionView());
    private static readonly Lazy<ResourceDictionary> DataForm_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.DataForm());
    private static readonly Lazy<ResourceDictionary> DataPager_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.DataPager());
    private static readonly Lazy<ResourceDictionary> NavigationView_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.NavigationView());
    private static readonly Lazy<ResourceDictionary> TabView_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.TabView());
    private static readonly Lazy<ResourceDictionary> Toolbar_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.Toolbar());
    private static readonly Lazy<ResourceDictionary> DataGrid_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.DataGrid());
    private static readonly Lazy<ResourceDictionary> Scheduler_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.Scheduler());
    private static readonly Lazy<ResourceDictionary> TreeView_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.TreeView(Core_Styles.Value));
    private static readonly Lazy<ResourceDictionary> AIPrompt_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.AIPrompt(Core_Styles.Value));
    private static readonly Lazy<ResourceDictionary> Entry_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.Entry(Core_Styles.Value));
    private static readonly Lazy<ResourceDictionary> ComboBox_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.ComboBox(Core_Styles.Value));
    private static readonly Lazy<ResourceDictionary> ImageEditor_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.ImageEditor(Core_Styles.Value, Toolbar_Styles.Value));
    private static readonly Lazy<ResourceDictionary> RichTextEditor_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.RichTextEditor(Core_Styles.Value, Toolbar_Styles.Value));
    private static readonly Lazy<ResourceDictionary> Chat_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.Chat(Core_Styles.Value, Entry_Styles.Value));
    private static readonly Lazy<ResourceDictionary> PDFViewer_Styles = new Lazy<ResourceDictionary>(() => new Telerik.Theming.Styles.PDFViewer(Core_Styles.Value, Entry_Styles.Value, Toolbar_Styles.Value));

    private void MergeThemeResources()
    {
        // Load theme variables and swatches
        switch (this.Theme.FullName)
        {
            case "Platform Main":
                this.MergedDictionaries.Add(Platform_Swatch_Main.Value);
                this.MergedDictionaries.Add(Platform_Variables.Value);
                break;
            case "Telerik Main":
                this.MergedDictionaries.Add(Telerik_Swatch_Main.Value);
                this.MergedDictionaries.Add(Telerik_Variables.Value);
                break;
            case "Telerik Main Dark":
                this.MergedDictionaries.Add(Telerik_Swatch_MainDark.Value);
                this.MergedDictionaries.Add(Telerik_Variables.Value);
                break;
            case "Telerik Ocean Blue":
                this.MergedDictionaries.Add(Telerik_Swatch_OceanBlue.Value);
                this.MergedDictionaries.Add(Telerik_Variables.Value);
                break;
            case "Telerik Ocean Blue Dark":
                this.MergedDictionaries.Add(Telerik_Swatch_OceanBlueDark.Value);
                this.MergedDictionaries.Add(Telerik_Variables.Value);
                break;
            case "Telerik Purple":
                this.MergedDictionaries.Add(Telerik_Swatch_Purple.Value);
                this.MergedDictionaries.Add(Telerik_Variables.Value);
                break;
            case "Telerik Purple Dark":
                this.MergedDictionaries.Add(Telerik_Swatch_PurpleDark.Value);
                this.MergedDictionaries.Add(Telerik_Variables.Value);
                break;
            case "Telerik Turquoise":
                this.MergedDictionaries.Add(Telerik_Swatch_Turquoise.Value);
                this.MergedDictionaries.Add(Telerik_Variables.Value);
                break;
            case "Telerik Turquoise Dark":
                this.MergedDictionaries.Add(Telerik_Swatch_TurquoiseDark.Value);
                this.MergedDictionaries.Add(Telerik_Variables.Value);
                break;
            default:
                throw new Exception($"Theme not available, key: {this.Theme}");
        }

        // Load control styles
        if (this.Theme.Theme == "Platform")
        {
            // Use the built-in XAML styles
        }
        else
        {
            this.MergedDictionaries.Add(Core_Styles.Value);
            this.MergedDictionaries.Add(Calendar_Styles.Value);
            this.MergedDictionaries.Add(Chart_Styles.Value);
            this.MergedDictionaries.Add(CollectionView_Styles.Value);
            this.MergedDictionaries.Add(DataForm_Styles.Value);
            this.MergedDictionaries.Add(DataPager_Styles.Value);
            this.MergedDictionaries.Add(NavigationView_Styles.Value);
            this.MergedDictionaries.Add(TabView_Styles.Value);
            this.MergedDictionaries.Add(Toolbar_Styles.Value);
            this.MergedDictionaries.Add(DataGrid_Styles.Value);
            this.MergedDictionaries.Add(Scheduler_Styles.Value);
            this.MergedDictionaries.Add(TreeView_Styles.Value);
            this.MergedDictionaries.Add(AIPrompt_Styles.Value);
            this.MergedDictionaries.Add(Entry_Styles.Value);
            this.MergedDictionaries.Add(ComboBox_Styles.Value);
            this.MergedDictionaries.Add(ImageEditor_Styles.Value);
            this.MergedDictionaries.Add(RichTextEditor_Styles.Value);
            this.MergedDictionaries.Add(Chat_Styles.Value);
            this.MergedDictionaries.Add(PDFViewer_Styles.Value);
        }
    }

    public class ThemeKey
    {
        public string Theme { get; private set; }
        public string Swatch { get; private set; }
        public string FullName => $"{this.Theme} {this.Swatch}";

        public ThemeKey(string theme, string swatch)
        {
            this.Theme = theme;
            this.Swatch = swatch;
        }

        public override string ToString() => this.FullName;
    }
}